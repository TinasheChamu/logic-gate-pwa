<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FPGA Virtual Digital Lab</title>
<style>
body {
    margin:0;
    font-family: Arial, sans-serif;
    background:#121212;
    color:#f0f0f0;
}
header {
    width:100%;
    background:#0d47a1;
    text-align:center;
    font-size:1.8em;
    padding:15px 0;
    font-weight:bold;
}

/* Tabs */
.tab-container {
    display:flex;
    justify-content:center;
    margin-top:15px;
    flex-wrap:wrap;
}
.tab {
    padding:10px 20px;
    margin:2px;
    cursor:pointer;
    border-radius:5px 5px 0 0;
    background:#333;
}
.tab.active {
    background:#0d47a1;
}

/* Tab content */
.tab-content {
    display:none;
    background:#1e1e1e;
    padding:20px;
    border-radius:0 10px 10px 10px;
    max-width:800px;
    margin:0 auto 20px auto;
}

/* Cards inside tab */
.card {
    background:#222;
    border-radius:10px;
    padding:15px;
    margin-bottom:20px;
}
.card h2 {
    text-align:center;
    color:#00bcd4;
}

/* Buttons */
button {
    padding:10px 15px;
    border:none;
    border-radius:5px;
    background:#0d47a1;
    color:white;
    cursor:pointer;
    font-weight:bold;
    margin-top:10px;
}
button:hover {background:#1565c0;}

/* Inputs */
.inputs {
    display:flex;
    flex-wrap:wrap;
    gap:10px;
    justify-content:center;
    margin:10px 0;
}
.inputs label {
    display:flex;
    align-items:center;
    gap:5px;
}

/* LED Matrix */
.led-container {
    display:grid;
    grid-template-columns:repeat(8,30px);
    justify-content:center;
    gap:8px;
    margin:20px 0;
}
.led {
    width:30px;
    height:30px;
    border-radius:50%;
    background:#333;
    box-shadow:inset 0 0 3px #000;
    position:relative;
}
.led::after {
    content: attr(data-bit);
    position:absolute;
    top:35px;
    left:50%;
    transform:translateX(-50%);
    font-size:12px;
    color:#ccc;
}
.led.on {
    background:lime;
    box-shadow:0 0 10px lime;
}

/* 7-Segment */
.seven-segment {
    position:relative;
    width:60px;
    height:100px;
    display:inline-block;
    margin:10px;
}
.segment {
    position:absolute;
    background:#333;
}
.segment.on {
    background:red;
    box-shadow:0 0 6px red;
}
.a { top:0; left:15px; width:30px; height:8px;}
.b { top:8px; right:0; width:8px; height:40px;}
.c { bottom:8px; right:0; width:8px; height:40px;}
.d { bottom:0; left:15px; width:30px; height:8px;}
.e { bottom:8px; left:0; width:8px; height:40px;}
.f { top:8px; left:0; width:8px; height:40px;}
.g { top:46px; left:15px; width:30px; height:8px;}

/* Output panel */
.output-panel {
    text-align:center;
    margin-top:10px;
    font-family: monospace;
}

/* Task instructions */
.task-content {
    background:#333;
    border-radius:5px;
    padding:10px;
    margin-top:10px;
}
</style>
</head>
<body>

<header>FPGA Virtual Digital Electronics Lab</header>

<!-- Tabs -->
<div class="tab-container">
    <div class="tab active" data-tab="combinational">Combinational Logic</div>
    <div class="tab" data-tab="sequential">Sequential Logic</div>
    <div class="tab" data-tab="hdl">HDL Exercises</div>
</div>

<!-- Combinational Logic Tab -->
<div class="tab-content" id="combinational" style="display:block;">
<div class="card">
<h2>Combinational Experiment</h2>
<textarea id="hdlCombinational" rows="4">OUT = A AND B;</textarea>
<div class="inputs">
<label>A <input type="checkbox" id="A1"></label>
<label>B <input type="checkbox" id="B1"></label>
<label>C <input type="checkbox" id="C1"></label>
<label>D <input type="checkbox" id="D1"></label>
</div>
<button onclick="runHDL('combinational')">Run Simulation</button>
</div>

<div class="card">
<h2>LED Matrix</h2>
<div id="ledCombinational" class="led-container"></div>
</div>

<div class="card">
<h2>7-Segment Display</h2>
<div style="text-align:center;">
<div class="seven-segment" id="highCombinational"></div>
<div class="seven-segment" id="lowCombinational"></div>
</div>
<div class="output-panel">
<p id="binCombinational"></p>
<p id="decCombinational"></p>
<p id="hexCombinational"></p>
</div>
</div>

<div class="card task-content">
<h3>Instructions</h3>
<ul>
<li>Basic logic gates: AND, OR, NOT, XOR, NAND, NOR</li>
<li>Half-adder: Inputs A,B → Outputs SUM,CARRY</li>
<li>Full-adder: Inputs A,B,Cin → Outputs SUM,CARRY</li>
<li>Multiplexer/Demultiplexer: Inputs + Select → Output</li>
</ul>
</div>
</div>

<!-- Sequential Logic Tab -->
<div class="tab-content" id="sequential">
<div class="card">
<h2>Sequential Experiment</h2>
<textarea id="hdlSequential" rows="4">OUT = A AND B;</textarea>
<div class="inputs">
<label>A <input type="checkbox" id="A2"></label>
<label>B <input type="checkbox" id="B2"></label>
<label>C <input type="checkbox" id="C2"></label>
<label>D <input type="checkbox" id="D2"></label>
</div>
<button onclick="runHDL('sequential')">Run Simulation</button>
</div>

<div class="card">
<h2>LED Matrix</h2>
<div id="ledSequential" class="led-container"></div>
</div>

<div class="card">
<h2>7-Segment Display</h2>
<div style="text-align:center;">
<div class="seven-segment" id="highSequential"></div>
<div class="seven-segment" id="lowSequential"></div>
</div>
<div class="output-panel">
<p id="binSequential"></p>
<p id="decSequential"></p>
<p id="hexSequential"></p>
</div>
</div>

<div class="card task-content">
<h3>Instructions</h3>
<ul>
<li>SR Flip-Flop: Inputs S,R,Clock → Output Q,Q'</li>
<li>JK Flip-Flop: Inputs J,K,Clock → Output Q,Q'</li>
<li>D Flip-Flop: Input D,Clock → Output Q</li>
<li>4-bit Counter: Clock,Reset → Output LED & 7-segment</li>
</ul>
</div>
</div>

<!-- HDL Exercises Tab -->
<div class="tab-content" id="hdl">
<div class="card">
<h2>HDL Exercise</h2>
<textarea id="hdlLab" rows="4">OUT = A AND B;</textarea>
<div class="inputs">
<label>A <input type="checkbox" id="A3"></label>
<label>B <input type="checkbox" id="B3"></label>
<label>C <input type="checkbox" id="C3"></label>
<label>D <input type="checkbox" id="D3"></label>
</div>
<button onclick="runHDL('hdl')">Run Simulation</button>
</div>

<div class="card">
<h2>LED Matrix</h2>
<div id="ledHDL" class="led-container"></div>
</div>

<div class="card">
<h2>7-Segment Display</h2>
<div style="text-align:center;">
<div class="seven-segment" id="highHDL"></div>
<div class="seven-segment" id="lowHDL"></div>
</div>
<div class="output-panel">
<p id="binHDL"></p>
<p id="decHDL"></p>
<p id="hexHDL"></p>
</div>
</div>

<div class="card task-content">
<h3>Instructions</h3>
<ul>
<li>Single-line HDL: OUT = A AND B</li>
<li>Multi-line HDL: SUM = A XOR B, CARRY = A AND B</li>
<li>HDL Counter: OUT = (OUT + 1) & 0xFF</li>
</ul>
</div>
</div>

<script>
// Tab switching
const tabs = document.querySelectorAll('.tab');
tabs.forEach(tab=>{
    tab.addEventListener('click',()=>{
        tabs.forEach(t=>t.classList.remove('active'));
        tab.classList.add('active');
        document.querySelectorAll('.tab-content').forEach(c=>c.style.display='none');
        document.getElementById(tab.getAttribute('data-tab')).style.display='block';
    });
});

// Create LED matrices
function createLEDs(containerId){
    const container = document.getElementById(containerId);
    for(let i=7;i>=0;i--){
        const led = document.createElement('div');
        led.classList.add('led');
        led.setAttribute('data-bit','D'+i);
        container.appendChild(led);
    }
}
['ledCombinational','ledSequential','ledHDL'].forEach(createLEDs);

// Create 7-segment elements
function createSegments(ids){
    ids.forEach(id=>{
        const container = document.getElementById(id);
        ['a','b','c','d','e','f','g'].forEach(seg=>{
            const div = document.createElement('div');
            div.classList.add('segment',seg);
            container.appendChild(div);
        });
    });
}
createSegments(['highCombinational','lowCombinational','highSequential','lowSequential','highHDL','lowHDL']);

// 7-segment map
const digitMap = {
    0: ['a','b','c','d','e','f'],
    1: ['b','c'],
    2: ['a','b','g','e','d'],
    3: ['a','b','g','c','d'],
    4: ['f','g','b','c'],
    5: ['a','f','g','c','d'],
    6: ['a','f','g','e','c','d'],
    7: ['a','b','c'],
    8: ['a','b','c','d','e','f','g'],
    9: ['a','b','c','d','f','g'],
    10:['a','b','c','e','f','g'],
    11:['f','e','g','c','d'],
    12:['a','f','e','d'],
    13:['b','c','g','e','d'],
    14:['a','f','g','e','d'],
    15:['a','f','g','e']
};

function updateSevenSegment(elementId,value){
    const segments = document.getElementById(elementId).querySelectorAll('.segment');
    segments.forEach(s=>s.classList.remove('on'));
    if(digitMap[value]){
        digitMap[value].forEach(s=>{
            const seg = document.getElementById(elementId).querySelector('.'+s);
            if(seg) seg.classList.add('on');
        });
    }
}

// Run HDL simulation
function runHDL(tab){
    let code,A,B,C,D,ledId,highId,lowId,binId,decId,hexId;
    if(tab==='combinational'){
        code=document.getElementById('hdlCombinational').value.toUpperCase();
        A=document.getElementById('A1').checked?1:0;
        B=document.getElementById('B1').checked?1:0;
        C=document.getElementById('C1').checked?1:0;
        D=document.getElementById('D1').checked?1:0;
        ledId='ledCombinational';
        highId='highCombinational';
        lowId='lowCombinational';
        binId='binCombinational';
        decId='decCombinational';
        hexId='hexCombinational';
    } else if(tab==='sequential'){
        code=document.getElementById('hdlSequential').value.toUpperCase();
        A=document.getElementById('A2').checked?1:0;
        B=document.getElementById('B2').checked?1:0;
        C=document.getElementById('C2').checked?1:0;
        D=document.getElementById('D2').checked?1:0;
        ledId='ledSequential';
        highId='highSequential';
        lowId='lowSequential';
        binId='binSequential';
        decId='decSequential';
        hexId='hexSequential';
    } else if(tab==='hdl'){
        code=document.getElementById('hdlLab').value.toUpperCase();
        A=document.getElementById('A3').checked?1:0;
        B=document.getElementById('B3').checked?1:0;
        C=document.getElementById('C3').checked?1:0;
        D=document.getElementById('D3').checked?1:0;
        ledId='ledHDL';
        highId='highHDL';
        lowId='lowHDL';
        binId='binHDL';
        decId='decHDL';
        hexId='hexHDL';
    }

    let result=0;
    if(code.includes('AND')) result=A&B;
    else if(code.includes('OR')) result=A|B;
    else if(code.includes('XOR')) result=A^B;
    else if(code.includes('NAND')) result=!(A&B)?1:0;
    else if(code.includes('NOT A')) result=A?0:1;

    const outputByte=Array(8).fill(result).join('');
    const leds=document.getElementById(ledId).querySelectorAll('.led');
    leds.forEach((led,i)=>{
        if(outputByte[i]==='1') led.classList.add('on');
        else led.classList.remove('on');
    });

    const decimalValue=parseInt(outputByte,2);
    document.getElementById(binId).innerText='Binary: '+outputByte;
    document.getElementById(decId).innerText='Decimal: '+decimalValue;
    document.getElementById(hexId).innerText='Hex: '+decimalValue.toString(16).toUpperCase();

    updateSevenSegment(highId,(decimalValue>>4)&0xF);
    updateSevenSegment(lowId,decimalValue&0xF);
}
</script>
</body>
</html>
