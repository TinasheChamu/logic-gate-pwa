<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Undergraduate Digital Electronics Laboratory</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="manifest" href="manifest.json">

<style>
body{
  font-family: Arial;
  margin:0;
  background:#eef2f7;
}

header{
  background:#1f2d3d;
  color:white;
  padding:12px;
  text-align:center;
}

nav{
  display:flex;
  overflow-x:auto;
  background:#2c3e50;
}

nav button{
  flex:1;
  padding:10px;
  border:none;
  background:#2c3e50;
  color:white;
}

nav button:hover{
  background:#34495e;
}

.section{
  display:none;
  padding:12px;
}

.active{
  display:block;
}

.card{
  background:white;
  padding:12px;
  margin:8px 0;
  border-radius:8px;
  box-shadow:0 3px 8px rgba(0,0,0,0.15);
}

.led{
  width:35px;
  height:35px;
  border-radius:50%;
  margin:8px auto;
}

.green{background:#00cc00;}
.red{background:#cc0000;}

table{
  width:100%;
  border-collapse:collapse;
}

th,td{
  border:1px solid #ccc;
  padding:6px;
  text-align:center;
}
</style>
</head>

<body>

<header>
<h2>Undergraduate Digital Electronics Laboratory</h2>
</header>

<nav>
<button onclick="showTab('logic')">Logic Gates</button>
<button onclick="showTab('flipflop')">Flip-Flops</button>
<button onclick="showTab('counter')">Counter</button>
<button onclick="showTab('shift')">Shift Register</button>
<button onclick="showTab('mux')">MUX</button>
<button onclick="showTab('wave')">Waveform</button>
</nav>

<!-- LOGIC GATES -->
<div id="logic" class="section active">
<div class="card">
<h3>Combinational Logic</h3>
A <select id="A"><option>0</option><option>1</option></select>
B <select id="B"><option>0</option><option>1</option></select>

Gate
<select id="gate">
<option>AND</option>
<option>OR</option>
<option>XOR</option>
<option>NAND</option>
<option>NOR</option>
<option>XNOR</option>
</select>

<button onclick="runLogic()">Run</button>

<div id="logicLED" class="led red"></div>
<h4 id="logicOut">Output: 0</h4>
</div>
</div>

<!-- FLIP FLOP -->
<div id="flipflop" class="section">
<div class="card">
<h3>SR Flip-Flop</h3>
S <select id="S"><option>0</option><option>1</option></select>
R <select id="R"><option>0</option><option>1</option></select>
<button onclick="runFF()">Update</button>

<div id="ffLED" class="led red"></div>
<h4 id="ffOut">Q: 0</h4>
</div>
</div>

<!-- COUNTER -->
<div id="counter" class="section">
<div class="card">
<h3>4-bit Binary Counter</h3>
<button onclick="startCounter()">Start</button>
<button onclick="stopCounter()">Stop</button>
<h2 id="counterDisplay">0000</h2>
</div>
</div>

<!-- SHIFT REGISTER -->
<div id="shift" class="section">
<div class="card">
<h3>4-bit Shift Register</h3>
<input type="number" id="shiftInput" min="0" max="1" value="0">
<button onclick="shift()">Shift</button>
<h2 id="shiftDisplay">0000</h2>
</div>
</div>

<!-- MULTIPLEXER -->
<div id="mux" class="section">
<div class="card">
<h3>2:1 Multiplexer</h3>
D0 <select id="D0"><option>0</option><option>1</option></select>
D1 <select id="D1"><option>0</option><option>1</option></select>
Select <select id="SEL"><option>0</option><option>1</option></select>
<button onclick="runMUX()">Run</button>

<div id="muxLED" class="led red"></div>
<h4 id="muxOut">Output: 0</h4>
</div>
</div>

<!-- WAVEFORM -->
<div id="wave" class="section">
<div class="card">
<h3>Clock Waveform</h3>
<button onclick="startWave()">Start</button>
<button onclick="stopWave()">Stop</button>
<h3 id="waveDisplay">0</h3>
</div>
</div>

<script>

let Q=0;
let counter=0;
let counterInt=null;
let shiftReg=[0,0,0,0];
let waveInt=null;
let waveVal=0;

function showTab(id){
document.querySelectorAll('.section').forEach(sec=>sec.classList.remove('active'));
document.getElementById(id).classList.add('active');
}

function runLogic(){
let a=+A.value;
let b=+B.value;
let g=gate.value;
let r=0;

if(g=="AND") r=a&b;
if(g=="OR") r=a|b;
if(g=="XOR") r=a^b;
if(g=="NAND") r=!(a&b)?1:0;
if(g=="NOR") r=!(a|b)?1:0;
if(g=="XNOR") r=!(a^b)?1:0;

logicLED.className="led "+(r?"green":"red");
logicOut.innerText="Output: "+r;
}

function runFF(){
let s=+S.value;
let r=+R.value;
if(s==1&&r==0) Q=1;
if(s==0&&r==1) Q=0;
if(s==1&&r==1) Q="Invalid";

if(Q==="Invalid"){
ffLED.className="led red";
ffOut.innerText="Invalid";
}else{
ffLED.className="led "+(Q?"green":"red");
ffOut.innerText="Q: "+Q;
}
}

function startCounter(){
counterInt=setInterval(()=>{
counter=(counter+1)%16;
counterDisplay.innerText=counter.toString(2).padStart(4,'0');
},500);
}

function stopCounter(){
clearInterval(counterInt);
}

function shift(){
let val=+shiftInput.value;
shiftReg.pop();
shiftReg.unshift(val);
shiftDisplay.innerText=shiftReg.join('');
}

function runMUX(){
let d0=+D0.value;
let d1=+D1.value;
let s=+SEL.value;
let out=s?d1:d0;
muxLED.className="led "+(out?"green":"red");
muxOut.innerText="Output: "+out;
}

function startWave(){
waveInt=setInterval(()=>{
waveVal=waveVal?0:1;
waveDisplay.innerText=waveVal;
},500);
}

function stopWave(){
clearInterval(waveInt);
}

if ('serviceWorker' in navigator) {
navigator.serviceWorker.register('service-worker.js');
}

</script>

</body>
</html>
